-- CREATION OF THE DATABASE PAYMYBUDDY
CREATE DATABASE IF NOT EXISTS prod;
USE prod;

-- CREATION OF THE 4 TABLES OF THE DATAMODEL FOR THE PAYMYBUDDY DATABASE
-- PRIMARY KEY OPTIMIZATION https://dev.mysql.com/doc/refman/8.0/en/primary-key-optimization.html
CREATE TABLE IF NOT EXISTS CLIENT (
    CLIENT_ID INT PRIMARY KEY AUTO_INCREMENT,
    FIRSTNAME VARCHAR(255) NOT NULL,
    LASTNAME VARCHAR(255) NOT NULL,
    EMAIL VARCHAR(255) NOT NULL,
    PASSWORD VARCHAR(255) NOT NULL,
    ROLE VARCHAR(255) NOT NULL
);

CREATE TABLE IF NOT EXISTS ACCOUNTS(
    ACCOUNT_ID INT PRIMARY KEY AUTO_INCREMENT,
    CLIENT_ID INT NOT NULL,
    BALANCE DECIMAL(10,2) NOT NULL,
    IBAN VARCHAR(255) NOT NULL,
    SWIFT VARCHAR(255) NOT NULL,
    FOREIGN KEY (CLIENT_ID) REFERENCES CLIENT(CLIENT_ID)
);


CREATE TABLE IF NOT EXISTS BENEFICIARIES
(
    beneficiary_id        INT PRIMARY KEY AUTO_INCREMENT,
    client_id             INT NOT NULL,
    BENEFICIARY_FIRSTNAME VARCHAR(255) NOT NULL,
    BENEFICIARY_LASTNAME VARCHAR(255) NOT NULL,
    IBAN VARCHAR(255) NOT NULL,
    SWIFT VARCHAR(255) NOT NULL,
    EMAIL VARCHAR(255) NOT NULL,
    FOREIGN KEY (CLIENT_ID) REFERENCES CLIENT (CLIENT_ID)
);

CREATE TABLE IF NOT EXISTS TRANSACTIONS(
    TRANSACTION_ID INT PRIMARY KEY AUTO_INCREMENT,
    client_id INT NOT NULL,
    beneficiary_id INT NOT NULL,
    AMOUNT DECIMAL(10,2) NOT NULL,
    DESCRIPTION VARCHAR(255),
    DATE DATETIME NOT NULL,
    STATUS INT NOT NULL,
    FOREIGN KEY (CLIENT_ID) REFERENCES CLIENT(CLIENT_ID),
    FOREIGN KEY (BENEFICIARY_ID) REFERENCES BENEFICIARIES(BENEFICIARY_ID)
);

COMMIT;


-- ADDING DUMMY VALUES FOR ALL THE TABLES
INSERT INTO CLIENT (FIRSTNAME, LASTNAME, EMAIL, PASSWORD, ROLE) VALUES ('Jane', 'Doe', 'user', '$2a$10$YXYinPAMn6MSeDoaaEQ.WOX7fp8B5TopQ5N7LiEDAeZXmjZ9ZV6vu', 'ADMIN');
INSERT INTO CLIENT (FIRSTNAME, LASTNAME, EMAIL, PASSWORD, ROLE) VALUES ('Bob', 'Smith', 'bob.smith@gmail.com', '$2a$10$YXYinPAMn6MSeDoaaEQ.WOX7fp8B5TopQ5N7LiEDAeZXmjZ9ZV6vu', 'USER');
INSERT INTO CLIENT (FIRSTNAME, LASTNAME, EMAIL, PASSWORD, ROLE) VALUES ('Alice', 'Johnson', 'alice.johnson@gmail.com', '$2a$10$YXYinPAMn6MSeDoaaEQ.WOX7fp8B5TopQ5N7LiEDAeZXmjZ9ZV6vu', 'USER');
INSERT INTO CLIENT (FIRSTNAME, LASTNAME, EMAIL, PASSWORD, ROLE) VALUES ('Charlie', 'Brown', 'charlie.brown@gmail.com', '$2a$10$YXYinPAMn6MSeDoaaEQ.WOX7fp8B5TopQ5N7LiEDAeZXmjZ9ZV6vu', 'USER');
INSERT INTO CLIENT (FIRSTNAME, LASTNAME, EMAIL, PASSWORD, ROLE) VALUES ('David', 'Miller', 'david.miller@gmail.com', '$2a$10$YXYinPAMn6MSeDoaaEQ.WOX7fp8B5TopQ5N7LiEDAeZXmjZ9ZV6vu', 'USER');
INSERT INTO CLIENT (FIRSTNAME, LASTNAME, EMAIL, PASSWORD, ROLE) VALUES ('Francesco', 'Martelli', 'francesco.martelli@gmail.com', '$2a$10$YXYinPAMn6MSeDoaaEQ.WOX7fp8B5TopQ5N7LiEDAeZXmjZ9ZV6vu', 'USER');

-- Insert into ACCOUNTS AND BALANCES status
INSERT INTO ACCOUNTS (CLIENT_ID, BALANCE, IBAN, SWIFT) VALUES (1, 1000.00, 'FR7630004015870002601171220','AAAAFRCC123');
INSERT INTO ACCOUNTS (CLIENT_ID, BALANCE, IBAN, SWIFT) VALUES (2, 2000.00, 'FR7630004015870002601171221','BBBBFRCC123');
INSERT INTO ACCOUNTS (CLIENT_ID, BALANCE, IBAN, SWIFT) VALUES (3, 3000.00, 'FR7630004015870002601170000','BBBBFRCC123');
INSERT INTO ACCOUNTS (CLIENT_ID, BALANCE, IBAN, SWIFT) VALUES (4, 4000.00, 'FR763000401587000260100000','CCCCFRCC123');
INSERT INTO ACCOUNTS (CLIENT_ID, BALANCE, IBAN, SWIFT) VALUES (5, 10000.00,'FR763000000000000000000000','CCDDFRCC123');

-- Insert into BENEFICIARIES -- User 1 has preloaded several beneficiaries
INSERT INTO BENEFICIARIES (CLIENT_ID, BENEFICIARY_FIRSTNAME, BENEFICIARY_LASTNAME, IBAN, SWIFT, EMAIL) VALUES (1, 'Emily', 'Smith', 'FR7630004015870002601170001', 'BBBBFRCC123', 'emily.smith@gmail.com');
INSERT INTO BENEFICIARIES (CLIENT_ID, BENEFICIARY_FIRSTNAME, BENEFICIARY_LASTNAME, IBAN, SWIFT, EMAIL) VALUES (1, 'Michael', 'Smith', 'FR7630004015870002601170001', 'BBBBFRCC123','michael.smith@gmail.com');
INSERT INTO BENEFICIARIES (CLIENT_ID, BENEFICIARY_FIRSTNAME, BENEFICIARY_LASTNAME, IBAN, SWIFT, EMAIL) VALUES (1, 'Sarah', 'Smith', 'FR7630004015870002601170001', 'BBBBFRCC123','sarah.smith@gmail.com');
INSERT INTO BENEFICIARIES (CLIENT_ID, BENEFICIARY_FIRSTNAME, BENEFICIARY_LASTNAME, IBAN, SWIFT, EMAIL) VALUES (1, 'James', 'Smith', 'FR7630004015870002601170001', 'BBBBFRCC123', 'james.smith@gmail.com');
INSERT INTO BENEFICIARIES (CLIENT_ID, BENEFICIARY_FIRSTNAME, BENEFICIARY_LASTNAME, IBAN, SWIFT, EMAIL) VALUES (1, 'Jessica', 'Smith', 'FR7630004015870002601170001', 'BBBBFRCC123', 'jessica.smith@gmail.com');
INSERT INTO BENEFICIARIES (CLIENT_ID, BENEFICIARY_FIRSTNAME, BENEFICIARY_LASTNAME, IBAN, SWIFT, EMAIL) VALUES (2, 'Carlos', 'Johnson', 'COL76300000000000000000', 'BBBBCOLCC123', 'carlos.j@gmail.com');
INSERT INTO BENEFICIARIES (CLIENT_ID, BENEFICIARY_FIRSTNAME, BENEFICIARY_LASTNAME, IBAN, SWIFT, EMAIL) VALUES (3, 'Amanda', 'Williams', 'CL76400000000000000', 'BBBBCLCC123', 'amanda.wi@gmail.com');
INSERT INTO BENEFICIARIES (CLIENT_ID, BENEFICIARY_FIRSTNAME, BENEFICIARY_LASTNAME, IBAN, SWIFT, EMAIL) VALUES (4, 'Charles', 'Brown', 'US76500004015870002601170000', 'BBBBUSCC123', 'charlees.brown@gmail.com');
INSERT INTO BENEFICIARIES (CLIENT_ID, BENEFICIARY_FIRSTNAME, BENEFICIARY_LASTNAME, IBAN, SWIFT, EMAIL) VALUES (5, 'Olivia', 'Jones','CL7660000000000000000', 'BBBBCLCC123', 'olivia.jones@gmail.com');

-- Insert into TRANSACTIONS -- Client ID 1 has several transactions, the rest only one per beneficiary
INSERT INTO TRANSACTIONS (CLIENT_ID, BENEFICIARY_ID, AMOUNT, DESCRIPTION, DATE, STATUS) VALUES (1, 2, 100.00, 'Payment for services', '2023-01-01 11:00:00', 1);
INSERT INTO TRANSACTIONS (CLIENT_ID, BENEFICIARY_ID, AMOUNT, DESCRIPTION, DATE, STATUS) VALUES (2, 3, 200.00, 'Rent', '2023-01-02 11:00:00', 1);
INSERT INTO TRANSACTIONS (CLIENT_ID, BENEFICIARY_ID, AMOUNT, DESCRIPTION, DATE, STATUS) VALUES (3, 4, 300.00, 'Casino', '2023-01-03 11:00:00', 1);
INSERT INTO TRANSACTIONS (CLIENT_ID, BENEFICIARY_ID, AMOUNT, DESCRIPTION, DATE, STATUS) VALUES (4, 5, 400.00, 'McDonalds', '2023-01-04 09:00:00', 1);
INSERT INTO TRANSACTIONS (CLIENT_ID, BENEFICIARY_ID, AMOUNT, DESCRIPTION, DATE, STATUS) VALUES (1, 1, 500.00, 'Train tickets', '2023-01-05 14:00:00', 1);
INSERT INTO TRANSACTIONS (CLIENT_ID, BENEFICIARY_ID, AMOUNT, DESCRIPTION, DATE, STATUS) VALUES (1, 1, 3000.00, 'Airplane tickets', '2024-01-05 14:00:00', 1);
INSERT INTO TRANSACTIONS (CLIENT_ID, BENEFICIARY_ID, AMOUNT, DESCRIPTION, DATE, STATUS) VALUES (1, 1, 300.00, 'Restaurant', '2024-01-05 14:00:00', 1);

COMMIT;
